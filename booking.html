<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Grameen Cooling - Book Service</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0; padding: 0;
      background: #f0f8ff;
    }
    header {
      background: #004466;
      color: white;
      padding: 10px;
      text-align: center;
    }
    section {
      padding: 20px;
      max-width: 600px;
      margin: auto;
    }
    form input, form select, form button {
      width: 100%; margin: 10px 0; padding: 10px;
      border: 1px solid #ccc; border-radius: 5px;
    }
    button {
      background: #006699; color: white;
      cursor: pointer;
      font-weight: bold;
    }
    #thankYouPopup {
      display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0, 0, 0, 0.6); z-index: 9999;
      display: flex; justify-content: center; align-items: center;
    }
    #thankYouPopup > div {
      background: white; padding: 30px 20px; border-radius: 12px;
      text-align: center; animation: zoomIn 0.4s ease;
    }
    @keyframes zoomIn {
      from { transform: scale(0.6); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }
    .hidden { display: none; }
  </style>
</head>
<body>

<header>
  <h1>Grameen Cooling Solution</h1>
</header>

<section id="bookingSection">
  <h2>Book a Service</h2>
  <form id="bookingForm">
    <input type="text" name="name" placeholder="Your Name" required />
    <input type="tel" name="mobile" placeholder="Mobile Number" required />
    <input type="text" name="pincode" placeholder="Pincode" required />
    <input type="text" name="address" placeholder="Full Address" required />
    <input type="email" name="email" placeholder="Email" required />

    <select name="service" id="serviceSelect" required>
      <option value="">Select Service</option>
      <option value="AC Repair">AC Repair</option>
      <option value="Cooler Installation">Cooler Installation</option>
    </select>

    <select name="condition" id="conditionSelect" required>
      <option value="">Select Condition</option>
      <option value="Working">Working</option>
      <option value="Not Working">Not Working</option>
    </select>

    <input type="number" name="quantity" placeholder="Quantity" required />
    <input type="number" name="visitingCharge" placeholder="Visiting Charge (â‚¹)" required />
    <button type="submit">Submit Booking</button>
  </form>
</section>

<section id="trackingSection" class="hidden">
  <h2>Track Your Order</h2>
  <input type="text" id="trackOrderId" placeholder="Enter Your Order ID" />
  <button onclick="trackOrder()">Track</button>
  <div id="trackingResult" style="margin-top:15px; background:#eef; padding:10px; border-radius:6px;"></div>
</section>

<!-- Thank You Popup -->
<div id="thankYouPopup">
  <div>
    <h2 style="color:#006699;">ðŸŽ‰ Thank You!</h2>
    <p>Your order has been placed successfully.</p>
    <p><strong>Order ID:</strong> <span id="popupOrderId" style="color:#004466;"></span></p>
    <p>Redirecting to tracking...</p>
  </div>
</div>

<script>
  function showSection(sectionId) {
    document.getElementById("bookingSection").classList.add("hidden");
    document.getElementById("trackingSection").classList.add("hidden");
    document.getElementById(sectionId).classList.remove("hidden");
  }

  document.getElementById("bookingForm").addEventListener("submit", function(e) {
    e.preventDefault();

    const name = this.name.value.trim();
    const mobile = this.mobile.value.trim();
    const pincode = this.pincode.value.trim();
    const address = this.address.value.trim();
    const email = this.email.value.trim();
    const service = this.service.value;
    const condition = this.condition.value;
    const quantity = this.quantity.value;
    const visitingCharge = this.visitingCharge.value;

    if (!service || !condition) {
      alert("Please select all options.");
      return;
    }

    const orderId = "ORD" + Date.now();
    let orders = JSON.parse(localStorage.getItem("orders") || "{}");
    orders[orderId] = {
      name, mobile, pincode, address, email,
      service, condition, quantity, visitingCharge,
      status: "Pending Approval"
    };
    localStorage.setItem("orders", JSON.stringify(orders));

    // Show Thank You Popup
    document.getElementById("popupOrderId").innerText = orderId;
    document.getElementById("thankYouPopup").style.display = "flex";

    this.reset();

    // Redirect after 4 seconds
    setTimeout(() => {
      document.getElementById("trackOrderId").value = orderId;
      document.getElementById("thankYouPopup").style.display = "none";
      showSection("trackingSection");
      trackOrder();
    }, 4000);
  });

  function trackOrder() {
    const orderIdInput = document.getElementById("trackOrderId").value.trim();
    const resultDiv = document.getElementById("trackingResult");

    if (!orderIdInput) {
      resultDiv.textContent = "Please enter your Order ID.";
      return;
    }

    const orders = JSON.parse(localStorage.getItem("orders") || "{}");
    const order = orders[orderIdInput];

    if (order) {
      resultDiv.innerHTML = `
        <p><strong>Order ID:</strong> ${orderIdInput}</p>
        <p><strong>Name:</strong> ${order.name}</p>
        <p><strong>Service:</strong> ${order.service}</p>
        <p><strong>Condition:</strong> ${order.condition}</p>
        <p><strong>Quantity:</strong> ${order.quantity}</p>
        <p><strong>Technician:</strong> ${order.technician || "Pending"}</p>
        <p><strong>Visit Date:</strong> ${order.visitDate || "Pending"}</p>
        <p><strong>Visit Time:</strong> ${order.visitTime || "Pending"}</p>
        <p><strong>Visiting Charge:</strong> â‚¹${order.visitingCharge || "0"}</p>
        <p><strong>Payment Status:</strong> ${order.paymentStatus || "Pending"}</p>
        <p><strong>Status:</strong> ${order.status}</p>
      `;
    } else {
      resultDiv.textContent = "Order ID not found. Please check and try again.";
    }
  }
</script>

</body>
</html>
